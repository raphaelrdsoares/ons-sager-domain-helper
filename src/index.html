<!DOCTYPE html>
<html ng-app="app">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<title>ONS Sager Domain Helper</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta name="author" content="Raphael R. D. Soares" />

		<!-- favicon profissional gerado com https://realfavicongenerator.net/ -->
		<link rel="apple-touch-icon" sizes="180x180" href="images/favicon/apple-touch-icon.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="images/favicon/favicon-32x32.png" />
		<link rel="icon" type="image/png" sizes="16x16" href="images/favicon/favicon-16x16.png" />
		<link rel="manifest" href="images/favicon/site.webmanifest" />
		<link rel="mask-icon" href="images/favicon/safari-pinned-tab.svg" color="#383b43" />
		<meta name="msapplication-TileColor" content="#383b43" />
		<meta name="theme-color" content="#ffffff" />

		<!-- Import Font Awesome -->

		<!-- Import Google Icon and Fonts -->
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
		<link
			href="http://fonts.googleapis.com/css?family=Raleway:400,100,100italic,200,200italic,300,300italic,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic"
			rel="stylesheet"
		/>

		<!-- build:css css/styles.min.css -->
		<link type="text/css" rel="stylesheet" href="../node_modules/@fortawesome/fontawesome-free/css/all.min.css" />
		<link type="text/css" rel="stylesheet" href="../node_modules/reset-css/reset.css" />
		<link type="text/css" rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.css" />
		<link type="text/css" rel="stylesheet" media="screen" href="css/main.css" />
		<!-- endbuild -->
	</head>

	<body ng-controller="DomainController as controller">
		<nav class="navbar navbar-expand-md navbar-dark bg-dark fixed-top">
			<a class="navbar-brand" href="#">ONS SAGER Domain Helper</a>
			<button
				class="navbar-toggler"
				type="button"
				data-toggle="collapse"
				data-target="#navbarsExampleDefault"
				aria-controls="navbarsExampleDefault"
				aria-expanded="false"
				aria-label="Toggle navigation"
			>
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbarsExampleDefault">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item active">
						<a class="nav-link" href="#"> Home <span class="sr-only">(current)</span></a>
					</li>
					<li class="nav-item"><a class="nav-link" href="#">Link</a></li>
				</ul>
			</div>
		</nav>

		<main role="main" class="container">
			<div class="custom-panel shadow">
				<form id="form_searchByURL" ng-submit="onSubmitSearch()">
					<div class="form-row">
						<div class="form-group col-md-10">
							<input
								type="url"
								name="inpTxt_mainUrl"
								id="inpTxt_mainUrl"
								class="form-control"
								placeholder="URL do serviço. Ex: http://localhost/sager/..."
								ng-model="inpTxt_mainUrl"
							/>
						</div>
						<div class="col-md-2">
							<button type="submit" class="btn btn-primary btn-block">Buscar</button>
						</div>
					</div>
				</form>
				<div ng-show="records.length > 0">
					<hr class="mb-4 mt-3" />
					<div class="mb-3">
						<button
							class="btn btn-outline-danger"
							data-toggle="modal"
							data-target="#modal_confirmDeleteAll"
						>
							Excluir todos
						</button>
					</div>
					<div>
						<div class="mb-3" ng-repeat="record in records">
							<div class="row border rounded p-2">
								<div
									class="col-md-10 pointer"
									data-toggle="collapse"
									data-target="#div_recordData{{record.id}}"
								>
									<i class="fas fa-caret-down mr-1"></i> <span> {{ record.id }} </span>
								</div>
								<div class="col-md-2 text-right">
									<i
										class="fas fa-edit pointer mr-2"
										title="Editar registro"
										data-toggle="modal"
										data-target="#modal_edit"
										ng-click="onEditRecord(record.id)"
									></i>
									<i
										class="fas fa-trash pointer"
										title="Excluir registro"
										data-toggle="modal"
										data-target="#modal_confirmDeleteById"
									></i>
								</div>
							</div>
							<div class="collapse" id="div_recordData{{record.id}}">
								<div class="card card-body">
									<pre> {{format(record) | json}} </pre>
								</div>
							</div>

							<!-- Modal: Edit -->
							<div class="modal fade" id="modal_edit" tabindex="-1" role="dialog">
								<div class="modal-dialog modal-lg" role="document">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title">Editar</h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="modal-body">
											<textarea
												name="txtArea_editRecord"
												id="txtArea_editRecord"
												class="form-control w-100"
												style="font-family: monospace"
												rows="12"
											></textarea>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-outline-dark" data-dismiss="modal">
												Cancelar
											</button>
											<button
												type="button"
												class="btn btn-primary"
												ng-click="onSaveEditRecord(record.id)"
											>
												Salvar
											</button>
										</div>
									</div>
								</div>
							</div>
							<!-- end modal -->

							<!-- Modal: Delete by id -->
							<div
								class="modal fade"
								id="modal_confirmDeleteById"
								tabindex="-1"
								role="dialog"
								aria-labelledby="mySmallModalLabel"
								aria-hidden="true"
							>
								<div class="modal-dialog modal-sm">
									<div class="modal-content">
										<div class="modal-header">
											<h5 class="modal-title">Confirma exclusão ?</h5>
											<button type="button" class="close" data-dismiss="modal" aria-label="Close">
												<span aria-hidden="true">&times;</span>
											</button>
										</div>
										<div class="modal-footer">
											<button type="button" class="btn btn-outline-dark" data-dismiss="modal">
												Cancelar
											</button>
											<button
												type="button"
												class="btn btn-primary"
												ng-click="onDelete(record.id)"
											>
												Confirmar
											</button>
										</div>
									</div>
								</div>
							</div>
							<!-- end Modal -->
						</div>
					</div>
				</div>
			</div>
		</main>
		<!-- /. container -->

		<!-- Modal: Delete All -->
		<div
			class="modal fade"
			id="modal_confirmDeleteAll"
			tabindex="-1"
			role="dialog"
			aria-labelledby="mySmallModalLabel"
			aria-hidden="true"
		>
			<div class="modal-dialog modal-sm">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Confirma excluir todos ?</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-outline-dark" data-dismiss="modal">Cancelar</button>
						<button type="submit" class="btn btn-primary" ng-click="onDeleteAll()">Confirmar</button>
					</div>
				</div>
			</div>
		</div>
		<!-- end Modal -->

		<!-- build:js js/main.min.js -->
		<!-- JavaScript at end of body for optimized loading -->
		<script type="text/javascript" src="../node_modules/jquery/dist/jquery.js"></script>
		<script type="text/javascript" src="../node_modules/bootstrap/dist/js/bootstrap.js"></script>
		<script type="text/javascript" src="../node_modules/angular/angular.js"></script>
		<script type="text/javascript" src="js/main.js"></script>
		<!-- endbuild -->
	</body>
</html>
